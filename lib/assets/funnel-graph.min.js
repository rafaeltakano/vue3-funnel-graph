!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).FunnelGraph=t()}}(function(){return function(){return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){return i(e[o][1][t]||t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}}()({1:[function(t,e,n){"use strict";e.exports=t("./src/js/main").default},{"./src/js/main":3}],2:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.defaultColors=n.removeAttrs=n.setAttrs=n.createSVGElement=n.areEqual=n.getDefaultColors=n.generateLegendBackground=void 0;var i=function(t,e){"object"===r(e)&&Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})};n.setAttrs=i;n.removeAttrs=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach(function(e){t.removeAttribute(e)})};n.createSVGElement=function(t,e,n){var a=document.createElementNS("http://www.w3.org/2000/svg",t);return"object"===r(n)&&i(a,n),void 0!==e&&e.appendChild(a),a};n.generateLegendBackground=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";return"string"==typeof t?"background-color: ".concat(t):1===t.length?"background-color: ".concat(t[0]):"background-image: linear-gradient(".concat("horizontal"===e?"to right, ":"").concat(t.join(", "),")")};var a=["#FF4589","#FF5050","#05DF9D","#4FF2FD","#2D9CDB","#A0BBFF","#FFD76F","#F2C94C","#FF9A9A","#FFB178"];n.defaultColors=a;n.getDefaultColors=function(t){for(var e=[].concat(a),n=[],r=0;r<t;r++){var i=Math.abs(Math.round(Math.random()*(e.length-1)));n.push(e[i]),e.splice(i,1)}return n};n.areEqual=function(t,e){var n=Object.prototype.toString.call(t);if(n!==Object.prototype.toString.call(e))return!1;if("[object Array]"!==n)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var i=Object.prototype.toString.call(t[r]);if(i!==Object.prototype.toString.call(e[r]))return!1;if("[object Array]"===i){if(t[r].length!==e[r].length)return!1;for(var a=0;a<t[r].length;a++)if(t[r][a]!==e[r][a])return!1}else if(t[r]!==e[r])return!1}return!0}},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("./number"),i=t("./path"),a=t("./graph");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerSelector=e.container,this.gradientDirection=e.gradientDirection&&"vertical"===e.gradientDirection?"vertical":"horizontal",this.direction=e.direction&&"vertical"===e.direction?"vertical":"horizontal",this.labels=t.getLabels(e),this.subLabels=t.getSubLabels(e),this.values=t.getValues(e),this.percentages=this.createPercentages(),this.colors=e.data.colors||(0,a.getDefaultColors)(this.is2d()?this.getSubDataSize():2),this.displayPercent=e.displayPercent||!1,this.data=e.data,this.height=e.height,this.width=e.width,this.subLabelValue=e.subLabelValue||"percent"}var e,n,u;return e=t,u=[{key:"getSubLabels",value:function(t){if(!t.data)throw new Error("Data is missing");var e=t.data;return void 0===e.subLabels?[]:e.subLabels}},{key:"getLabels",value:function(t){if(!t.data)throw new Error("Data is missing");var e=t.data;return void 0===e.labels?[]:e.labels}},{key:"getValues",value:function(t){if(!t.data)return[];var e=t.data;return"object"===o(e)?e.values:[]}}],(n=[{key:"getMainAxisPoints",value:function(){for(var t=this.getDataSize(),e=[],n=this.isVertical()?this.getHeight():this.getWidth(),i=0;i<=t;i++)e.push((0,r.roundPoint)(n*i/t));return e}},{key:"getCrossAxisPoints",value:function(){var t=[],e=this.getFullDimension(),n=e/2;if(this.is2d()){var i=this.getValues2d(),a=Math.max.apply(Math,s(i));i.push(s(i).pop()),t.push(i.map(function(t){return(0,r.roundPoint)((a-t)/a*n)}));for(var o=this.getPercentages2d(),c=t[0],u=1;u<this.getSubDataSize();u++){for(var l=t[u-1],h=[],d=0;d<this.getDataSize();d++)h.push((0,r.roundPoint)(l[d]+(e-2*c[d])*(o[d][u-1]/100)));h.push([].concat(h).pop()),t.push(h)}t.push(c.map(function(t){return e-t}))}else{var f=Math.max.apply(Math,s(this.values)),g=s(this.values).concat(s(this.values).pop());t.push(g.map(function(t){return(0,r.roundPoint)((f-t)/f*n)})),t.push(t[0].map(function(t){return e-t}))}return t}},{key:"getGraphType",value:function(){return this.values&&this.values[0]instanceof Array?"2d":"normal"}},{key:"is2d",value:function(){return"2d"===this.getGraphType()}},{key:"isVertical",value:function(){return"vertical"===this.direction}},{key:"getDataSize",value:function(){return this.values.length}},{key:"getSubDataSize",value:function(){return this.values[0].length}},{key:"getFullDimension",value:function(){return this.isVertical()?this.getWidth():this.getHeight()}},{key:"addLabels",value:function(){var t=this,e=document.createElement("div");e.setAttribute("class","svg-funnel-js__labels"),this.percentages.forEach(function(n,i){var a=document.createElement("div");a.setAttribute("class","svg-funnel-js__label label-".concat(i+1));var o=document.createElement("div");o.setAttribute("class","label__title"),o.textContent=t.labels[i]||"";var s=document.createElement("div");s.setAttribute("class","label__value");var c=t.is2d()?t.getValues2d()[i]:t.values[i];s.textContent=(0,r.formatNumber)(c);var u=document.createElement("div");if(u.setAttribute("class","label__percentage"),100!==n&&(u.textContent="".concat(n.toString(),"%")),a.appendChild(s),a.appendChild(o),t.displayPercent&&a.appendChild(u),t.is2d()){var l=document.createElement("div");l.setAttribute("class","label__segment-percentages");var h='<ul class="segment-percentage__list">',d=t.getPercentages2d();t.subLabels.forEach(function(e,n){var a="percent"===t.subLabelValue?"".concat(d[i][n],"%"):(0,r.formatNumber)(t.values[i][n]);h+="<li>".concat(t.subLabels[n],':\n    <span class="percentage__list-label">').concat(a,"</span>\n </li>")}),h+="</ul>",l.innerHTML=h,a.appendChild(l)}e.appendChild(a)}),this.container.appendChild(e)}},{key:"addSubLabels",value:function(){var t=this;if(this.subLabels){var e=document.createElement("div");e.setAttribute("class","svg-funnel-js__subLabels");var n="";this.subLabels.forEach(function(e,r){n+='<div class="svg-funnel-js__subLabel svg-funnel-js__subLabel-'.concat(r+1,'">\n    <div class="svg-funnel-js__subLabel--color" \n        style="').concat((0,a.generateLegendBackground)(t.colors[r],t.gradientDirection),'"></div>\n    <div class="svg-funnel-js__subLabel--title">').concat(e,"</div>\n</div>")}),e.innerHTML=n,this.container.appendChild(e)}}},{key:"createContainer",value:function(){if(!this.containerSelector)throw new Error("Container is missing");this.container=document.querySelector(this.containerSelector),this.container.classList.add("svg-funnel-js"),this.graphContainer=document.createElement("div"),this.graphContainer.classList.add("svg-funnel-js__container"),this.container.appendChild(this.graphContainer),"vertical"===this.direction&&this.container.classList.add("svg-funnel-js--vertical")}},{key:"setValues",value:function(t){return this.values=t,this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"setHeight",value:function(t){return this.height=t,this}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getValues2d",value:function(){var t=[];return this.values.forEach(function(e){t.push(e.reduce(function(t,e){return t+e},0))}),t}},{key:"getPercentages2d",value:function(){var t=[];return this.values.forEach(function(e){var n=e.reduce(function(t,e){return t+e},0);t.push(e.map(function(t){return 0===n?0:(0,r.roundPoint)(100*t/n)}))}),t}},{key:"createPercentages",value:function(){var t=[];t=this.is2d()?this.getValues2d():s(this.values);var e=Math.max.apply(Math,s(t));return t.map(function(t){return(0,r.roundPoint)(100*t/e)})}},{key:"applyGradient",value:function(t,e,n,r){var i=null===t.querySelector("defs")?(0,a.createSVGElement)("defs",t):t.querySelector("defs"),o="funnelGradient-".concat(r),s=(0,a.createSVGElement)("linearGradient",i,{id:o});"vertical"===this.gradientDirection&&(0,a.setAttrs)(s,{x1:"0",x2:"0",y1:"0",y2:"1"});for(var c=n.length,u=0;u<c;u++)(0,a.createSVGElement)("stop",s,{"stop-color":n[u],offset:"".concat(Math.round(100*u/(c-1)),"%")});(0,a.setAttrs)(e,{fill:'url("#'.concat(o,'")'),stroke:'url("#'.concat(o,'")')})}},{key:"makeSVG",value:function(){for(var t=(0,a.createSVGElement)("svg",this.graphContainer,{width:this.getWidth(),height:this.getHeight()}),e=this.getCrossAxisPoints().length-1,n=0;n<e;n++){var r=(0,a.createSVGElement)("path",t),i=this.is2d()?this.colors[n]:this.colors,o="string"==typeof i||1===i.length?"solid":"gradient";"solid"===o?(0,a.setAttrs)(r,{fill:i,stroke:i}):"gradient"===o&&this.applyGradient(t,r,i,n+1),t.appendChild(r)}this.graphContainer.appendChild(t)}},{key:"getSVG",value:function(){var t=this.container.querySelector("svg");if(!t)throw new Error("No SVG found inside of the container");return t}},{key:"getWidth",value:function(){return this.width||this.graphContainer.clientWidth}},{key:"getHeight",value:function(){return this.height||this.graphContainer.clientHeight}},{key:"getPathDefinitions",value:function(){for(var t=this.getCrossAxisPoints().length-1,e=[],n=0;n<t;n++)if(this.isVertical()){var r=this.getCrossAxisPoints()[n],a=this.getCrossAxisPoints()[n+1],o=this.getMainAxisPoints(),s=(0,i.createVerticalPath)(n,r,a,o);e.push(s)}else{var c=this.getMainAxisPoints(),u=this.getCrossAxisPoints()[n],l=this.getCrossAxisPoints()[n+1],h=(0,i.createPath)(n,c,u,l);e.push(h)}return e}},{key:"getPathMedian",value:function(t){if(this.isVertical()){var e=this.getCrossAxisPoints()[t],n=this.getCrossAxisPoints()[t+1],r=this.getMainAxisPoints(),a=[],o=[];return e.forEach(function(t,e){var r=(t+n[e])/2;a.push(r-1),o.push(r+1)}),(0,i.createVerticalPath)(t,a,o,r)}var s=this.getMainAxisPoints(),c=this.getCrossAxisPoints()[t],u=this.getCrossAxisPoints()[t+1],l=[],h=[];return c.forEach(function(t,e){var n=(t+u[e])/2;l.push(n-1),h.push(n+1)}),(0,i.createPath)(t,s,l,h)}},{key:"drawPaths",value:function(){var t=this.getSVG().querySelectorAll("path");this.getPathDefinitions().forEach(function(e,n){t[n].setAttribute("d",e)})}},{key:"draw",value:function(){this.createContainer(),this.makeSVG(),this.addLabels(),this.is2d()&&this.addSubLabels(),this.drawPaths()}},{key:"makeVertical",value:function(){if("vertical"===this.direction)return!0;this.direction="vertical",this.container.classList.add("svg-funnel-js--vertical");var t=this.getSVG(),e=this.getHeight(),n=this.getWidth();return(0,a.setAttrs)(t,{height:e,width:n}),this.drawPaths(),!0}},{key:"makeHorizontal",value:function(){if("horizontal"===this.direction)return!0;this.direction="horizontal",this.container.classList.remove("svg-funnel-js--vertical");var t=this.getSVG(),e=this.getHeight(),n=this.getWidth();return(0,a.setAttrs)(t,{height:e,width:n}),this.drawPaths(),!0}},{key:"toggleDirection",value:function(){"horizontal"===this.direction?this.makeVertical():this.makeHorizontal()}},{key:"gradientMakeVertical",value:function(){if("vertical"===this.gradientDirection)return!0;this.gradientDirection="vertical";for(var t=this.graphContainer.querySelectorAll("linearGradient"),e=0;e<t.length;e++)(0,a.setAttrs)(t[e],{x1:"0",x2:"0",y1:"0",y2:"1"});return!0}},{key:"gradientMakeHorizontal",value:function(){if("horizontal"===this.gradientDirection)return!0;this.gradientDirection="horizontal";for(var t=this.graphContainer.querySelectorAll("linearGradient"),e=0;e<t.length;e++)(0,a.removeAttrs)(t[e],"x1","x2","y1","y2");return!0}},{key:"gradientToggleDirection",value:function(){"horizontal"===this.gradientDirection?this.gradientMakeVertical():this.gradientMakeHorizontal()}},{key:"updateWidth",value:function(t){this.width=t;var e=this.getSVG(),n=this.getWidth();return(0,a.setAttrs)(e,{width:n}),this.drawPaths(),!0}},{key:"updateHeight",value:function(t){this.height=t;var e=this.getSVG(),n=this.getHeight();return(0,a.setAttrs)(e,{height:n}),this.drawPaths(),!0}},{key:"updateData",value:function(e){void 0!==e.labels&&(this.container.querySelector(".svg-funnel-js__labels").remove(),this.labels=t.getLabels({data:e}),this.addLabels()),void 0!==e.colors&&(this.colors=e.colors||(0,a.getDefaultColors)(this.is2d()?this.getSubDataSize():2)),void 0!==e.values&&(Object.prototype.toString.call(e.values[0])!==Object.prototype.toString.call(this.values[0])?(this.container.querySelector("svg").remove(),this.values=t.getValues({data:e}),this.makeSVG(),this.drawPaths()):(this.values=t.getValues({data:e}),this.drawPaths())),void 0!==e.subLabels&&(this.container.querySelector(".svg-funnel-js__subLabels").remove(),this.subLabels=t.getSubLabels({data:e}),this.addSubLabels())}},{key:"update",value:function(t){var e=this;void 0!==t.displayPercent&&this.displayPercent!==t.displayPercent&&(!0===this.displayPercent?this.container.querySelectorAll(".label__percentage").forEach(function(t){t.remove()}):this.container.querySelectorAll(".svg-funnel-js__label").forEach(function(t,n){var r=e.percentages[n],i=document.createElement("div");i.setAttribute("class","label__percentage"),100!==r&&(i.textContent="".concat(r.toString(),"%"),t.appendChild(i))})),void 0!==t.height&&this.updateHeight(t.height),void 0!==t.width&&this.updateWidth(t.width),void 0!==t.gradientDirection&&("vertical"===t.gradientDirection?this.gradientMakeVertical():"horizontal"===t.gradientDirection&&this.gradientMakeHorizontal()),void 0!==t.direction&&("vertical"===t.direction?this.makeVertical():"horizontal"===t.direction&&this.makeHorizontal()),void 0!==t.data&&this.updateData(t.data)}}])&&c(e.prototype,n),u&&c(e,u),t}();n.default=u},{"./graph":2,"./number":4,"./path":5}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.formatNumber=n.roundPoint=void 0;n.roundPoint=function(t){return isNaN(t)&&(t=0),Math.round(10*t)/10};n.formatNumber=function(t){return Number(t).toFixed().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createVerticalPath=n.createPath=n.createVerticalCurves=n.createCurves=void 0;var r=t("./number");function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(t,e,n,i){return" C".concat((0,r.roundPoint)((n+t)/2),",").concat(e," ")+"".concat((0,r.roundPoint)((n+t)/2),",").concat(i," ").concat(n,",").concat(i)};n.createCurves=a;var o=function(t,e,n,i){return" C".concat(t,",").concat((0,r.roundPoint)((i+e)/2)," ")+"".concat(n,",").concat((0,r.roundPoint)((i+e)/2)," ").concat(n,",").concat(i)};n.createVerticalCurves=o;n.createPath=function(t,e,n,r){for(var o="M".concat(e[0],",").concat(n[0]),s=0;s<e.length-1;s++)o+=a(e[s],n[s],e[s+1],n[s+1]);o+=" L".concat(i(e).pop(),",").concat(i(r).pop());for(var c=e.length-1;c>0;c--)o+=a(e[c],r[c],e[c-1],r[c-1]);return o+=" Z"};n.createVerticalPath=function(t,e,n,r){for(var a="M".concat(e[0],",").concat(r[0]),s=0;s<e.length-1;s++)a+=o(e[s],r[s],e[s+1],r[s+1]);a+=" L".concat(i(n).pop(),",").concat(i(r).pop());for(var c=e.length-1;c>0;c--)a+=o(n[c],r[c],n[c-1],r[c-1]);return a+=" Z"}},{"./number":4}]},{},[1])(1)});